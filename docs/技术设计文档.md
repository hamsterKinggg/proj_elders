# 项目概述

# 系统架构简述

# 数据库设计
## 概述
<p style="text-indent: 2em;">用于存储用户相关信息。主要存储的内容包括：</p>

- 用户身份：
    - ID，用物理设备的ID表示，不需要注册
    - 手机号或其他提供服务所必要的现实信息
    - 一人用还是多人用
- 服务统计（个人）：（FK：用户身份ID）
    - 对每个用户统计使用次数、使用天数、最后一次交互时间等，用于改善产品
- 服务统计（总体）：
    - 总用户量、日活用户量、活跃时间、并发峰值、平均回复时长等整体信息，用于改善产品
- 用户记忆：（FK：用户身份ID）
    - 标签，如情感状态、年龄、疾病症状等（单人用户）；子女关系、双方年龄、疾病状态等（双人用户）
    - 由OpenAI API总结出、经过预处理筛选过的个人关键词
    - 关键词的加入时间记录
    - 最后更新时间
- 常见疾病：
    - 与用户表多对多！！！
    - 可以与回答提示词表也有关联！！！
- 历史对话：（FK：用户身份ID）
    - 每个用户存五句问答，采用滚动窗口。暂定五句，数据用message index标记，表结构属性用逻辑限制或者TRIGGER限制，这个参数不写死！！！
    - 状态码，1-5，到5之后调用一次OpenAI API总结关键词
    - 发送问题的时间戳
- 待选用户关键词：（FK：用户身份ID还是每个关键词为一列？）
    - OpenAI API总结出的关键词，每总结一次就加一次计数器
    - 计数器到5后添加至用户记忆表的个人关键词
- 确定用户关键词：（待定！！！）
    - 添加此表就去掉用户记忆中关键词的字段，直接拆成一张新表
- 回答提示词：
    - 存放问题中潜在的关键词与影响OpenAI API回答的参考句子（与用户记忆无关，且提示词和关键词一对一，全由管理员手动编写！！！）
    - 是否启用
- 服务器日志：
    - 部分需要记录的后台活动记录等
    - 服务器的错误报告和平均响应时间等
- API调用日志：（FK：用户身份ID）
    - 用户消耗的token数、调用失败时的错误信息、OpenAI API 返回的 HTTP 状态码、OpenAI API的平均响应时间！！！等


注意：数据表定义的地方可以协商，在后台手动添加用户，因为要登记ID与对应人的手机号







# 接口设计

# 数据流